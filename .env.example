# ============================================================================
# CONFIGURACIÓN DE VARIABLES DE ENTORNO
# ============================================================================
#
# IMPORTANTE: Cómo usar este archivo
# -----------------------------------
# 1. Para DESARROLLO LOCAL:
#    - Copia este archivo como .env.local: cp .env.example .env.local
#    - Completa los valores en .env.local con tus credenciales
#    - Next.js cargará automáticamente .env.local cuando ejecutes npm run dev
#
# 2. Para PRODUCCIÓN:
#    - En plataformas como Vercel/Railway: configura las variables en el panel
#    - En servidores propios: crea un archivo .env con los valores de producción
#    - Next.js cargará automáticamente .env cuando ejecutes npm run build
#
# 3. NUNCA commitees .env.local o .env al repositorio (están en .gitignore)
#
# Para más información, consulta: docs/environment-variables.md
# 
# ============================================================================

# App Configuration
NEXT_PUBLIC_APP_NAME="PūrVita"

# Application URL (required for payment redirects and webhooks)
# Development: http://localhost:3000
# Production: https://yourdomain.com
NEXT_PUBLIC_APP_URL=http://localhost:30000

# Supabase Configuration
# Obtén estos valores desde tu proyecto en https://supabase.com/dashboard
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# API Security (OPCIONAL - Se configura desde Admin Panel)
# Estas variables son opcionales. La configuración se gestiona desde:
# Admin → Security → Rate Limit
# Solo se usan como fallback si la base de datos no está disponible
API_RATE_LIMIT_REQUESTS=60
API_RATE_LIMIT_WINDOW_MS=60000

# Login Rate Limiting (OPCIONAL - Se configura desde Admin Panel)
# Estas variables son opcionales. La configuración se gestiona desde:
# Admin → Security → Rate Limit
# Solo se usan como fallback si la base de datos no está disponible
LOGIN_RATE_LIMIT_ATTEMPTS=5
LOGIN_RATE_LIMIT_WINDOW_SECONDS=60

# CORS Configuration
# Dominios permitidos para CORS (separados por coma)
# Ejemplo: https://tudominio.com,https://admin.tudominio.com
# Dejar vacío para deshabilitar CORS (recomendado si no se necesita)
ALLOWED_CORS_ORIGINS=

# ==============================================================================
# SECURITY SECRETS (TODOS REQUERIDOS)
# ==============================================================================

# CSRF_SECRET (REQUERIDO - DESARROLLO Y PRODUCCIÓN)
# Secret para protección CSRF (Cross-Site Request Forgery)
# Previene ataques de falsificación de solicitudes entre sitios
# Generar con: openssl rand -hex 32
# Debe ser al menos 32 caracteres (recomendado: 64 caracteres hexadecimales)
# ⚠️ REQUERIDO en DESARROLLO y PRODUCCIÓN - la aplicación fallará sin este valor
# Sin este valor, los formularios del admin no podrán guardar cambios
CSRF_SECRET=

# CSRF_COOKIE_DOMAIN (OPCIONAL)
# Dominio para las cookies CSRF - permite que funcionen en subdominios
# Ejemplos:
#   - Para un solo dominio: no configurar (por defecto)
#   - Para subdominios: .tudominio.com (nota el punto inicial)
#   - Para múltiples dominios: configurar en cada deployment
# ⚠️ Solo configurar si tienes problemas con CSRF en subdominios/dominios diferentes
# Dejar vacío para desarrollo local
CSRF_COOKIE_DOMAIN=

# CUSTOM_ID_SECRET (REQUERIDO)
# Secret para firmar custom IDs de PayPal (previene manipulación de transacciones)
# Generar con: openssl rand -hex 32
# Debe ser exactamente 64 caracteres hexadecimales
# ⚠️ NUNCA cambiar en producción o perderás acceso a transacciones en curso
CUSTOM_ID_SECRET=

# Observability & Monitoring
# Configure Sentry for both client and server environments.
NEXT_PUBLIC_SENTRY_DSN=
SENTRY_DSN=
SENTRY_ORG=
SENTRY_PROJECT=
SENTRY_AUTH_TOKEN=

# Sampling rates must be between 0 and 1.
NEXT_PUBLIC_SENTRY_TRACES_SAMPLE_RATE=0.2
SENTRY_TRACES_SAMPLE_RATE=0.2
NEXT_PUBLIC_SENTRY_REPLAYS_SESSION_SAMPLE_RATE=0.1
NEXT_PUBLIC_SENTRY_REPLAYS_ON_ERROR_SAMPLE_RATE=1

# Email Provider
RESEND_API_KEY=
CONTACT_FROM_EMAIL=contact@example.com
CONTACT_FROM_NAME="PūrVita Support"
CONTACT_REPLY_TO_EMAIL=
CONTACT_SUBJECT_PREFIX="[PurVita Contact]"

MAILCHIMP_API_KEY=tu_api_key_aqui
MAILCHIMP_AUDIENCE_ID=tu_audience_id_aqui

# ==============================================================================
# PAYMENT GATEWAY CONFIGURATION
# ==============================================================================
# IMPORTANTE: Todas las credenciales de pago se configuran AQUÍ en variables de
# entorno. El panel /admin/pays solo permite:
#   - Activar/Desactivar métodos de pago
#   - Seleccionar funcionalidad: payment (recibir) | payout (enviar) | both (ambos)
#   - Seleccionar modo: production (live) | test (sandbox)
#
# MÉTODOS DE PAGO DISPONIBLES:
#   1. PayPal - Requiere credenciales de producción y/o test
#   2. Stripe - Requiere credenciales de producción y/o test
#   3. Wallet - Billetera interna (no requiere credenciales externas)
#   4. Manual - Depósito manual (configurar métodos en /admin/payment-wallets)
# ==============================================================================

# ------------------------------------------------------------------------------
# PayPal - Producción (Live)
# ------------------------------------------------------------------------------
# Cómo obtener:
#   1. Ir a: https://developer.paypal.com/dashboard/
#   2. Crear una app o seleccionar una existente
#   3. Copiar Client ID y Secret desde "App Credentials"
#   4. Para webhooks: Ir a "Webhooks" y copiar el Webhook Secret
#   5. Para PayPal Connect (opcional): Configurar en "Partner Referrals"

PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=
PAYPAL_WEBHOOK_SECRET=
PAYPAL_WEBHOOK_ID=
# Opcional - Para PayPal Connect (permite a usuarios conectar sus cuentas PayPal)
PAYPAL_CONNECT_CLIENT_ID=

# ------------------------------------------------------------------------------
# PayPal - Test/Sandbox
# ------------------------------------------------------------------------------
# Usar las mismas credenciales de sandbox de tu app de PayPal

PAYPAL_TEST_CLIENT_ID=
PAYPAL_TEST_CLIENT_SECRET=
PAYPAL_TEST_WEBHOOK_SECRET=
# Opcional - Para PayPal Connect en sandbox
PAYPAL_TEST_CONNECT_CLIENT_ID=

# ------------------------------------------------------------------------------
# Stripe - Producción (Live)
# ------------------------------------------------------------------------------
# Cómo obtener:
#   1. Ir a: https://dashboard.stripe.com/apikeys
#   2. Copiar Publishable key (pk_live_xxx)
#   3. Copiar Secret key (sk_live_xxx)
#   4. Para webhooks: Ir a "Developers > Webhooks" y copiar el Signing secret
#   5. Para Stripe Connect: Ir a "Settings > Connect" y copiar el Client ID (ca_xxx)
# IMPORTANTE: La clave pública DEBE tener el prefijo NEXT_PUBLIC_ para ser accesible en el cliente

NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
# Opcional - Para Stripe Connect (permite a usuarios conectar sus cuentas Stripe)
STRIPE_CONNECT_CLIENT_ID=

# ------------------------------------------------------------------------------
# Stripe - Test
# ------------------------------------------------------------------------------
# Usar las claves de test de tu cuenta de Stripe
# IMPORTANTE: La clave pública DEBE tener el prefijo NEXT_PUBLIC_ para ser accesible en el cliente

NEXT_PUBLIC_STRIPE_TEST_PUBLISHABLE_KEY=
STRIPE_TEST_SECRET_KEY=
STRIPE_TEST_WEBHOOK_SECRET=
# Opcional - Para Stripe Connect en test
STRIPE_TEST_CONNECT_CLIENT_ID=

# ------------------------------------------------------------------------------
# Authorize.net - Producción (Live)
# ------------------------------------------------------------------------------
# Cómo obtener:
#   1. Ir a: https://account.authorize.net/
#   2. Iniciar sesión en tu cuenta de Authorize.net
#   3. Ir a Account → Settings → API Credentials & Keys
#   4. Copiar API Login ID y Transaction Key
# IMPORTANTE: Authorize.net se usa principalmente para pagos (recibir)

AUTHORIZE_NET_API_LOGIN_ID=
AUTHORIZE_NET_TRANSACTION_KEY=

# ------------------------------------------------------------------------------
# Authorize.net - Test/Sandbox
# ------------------------------------------------------------------------------
# Usar las credenciales de sandbox de tu cuenta de Authorize.net
# Obtener cuenta sandbox en: https://developer.authorize.net/hello_world/sandbox/

AUTHORIZE_NET_TEST_API_LOGIN_ID=
AUTHORIZE_NET_TEST_TRANSACTION_KEY=

# ------------------------------------------------------------------------------
# Payoneer - Producción (Live)
# ------------------------------------------------------------------------------
# Cómo obtener:
#   1. Ir a: https://payouts.payoneer.com/partners/
#   2. Iniciar sesión en tu cuenta de Payoneer
#   3. Ir a Settings → API Credentials
#   4. Copiar API Username, API Password y Partner ID
# IMPORTANTE: Payoneer se usa principalmente para payouts (enviar pagos)

PAYONEER_API_USERNAME=
PAYONEER_API_PASSWORD=
PAYONEER_PARTNER_ID=

# ------------------------------------------------------------------------------
# Payoneer - Test/Sandbox
# ------------------------------------------------------------------------------
# Usar las credenciales de sandbox de tu cuenta de Payoneer
# Solicitar acceso sandbox en: https://payouts.payoneer.com/partners/

PAYONEER_TEST_API_USERNAME=
PAYONEER_TEST_API_PASSWORD=
PAYONEER_TEST_PARTNER_ID=

# Upstash Redis Configuration
# Obtén estos valores desde tu proyecto en https://console.upstash.com/
# Redis se usa para caché, sesiones y rate limiting
UPSTASH_REDIS_REST_URL=your_upstash_redis_rest_url
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_rest_token

# ==============================================================================
# CRON JOB SECURITY (REQUERIDO)
# ==============================================================================

# CRON_SECRET (REQUERIDO)
# Secret para proteger endpoints de trabajos programados (cron jobs)
# Previene ejecución no autorizada de tareas automatizadas
# Generar con: openssl rand -hex 32
# Ejemplo de uso: POST /api/cron/cleanup?secret=tu_cron_secret
CRON_SECRET=

# ==============================================================================
# ADMIN BYPASS CONFIGURATION 
# ==============================================================================

# NEXT_PUBLIC_ADMIN_BYPASS_URL
# Ruta personalizada para acceder al panel de administración durante modo mantenimiento
# o cuando el sitio está en "coming soon"
#
# ✅ SIMPLIFICADO: Solo necesitas configurar esta variable (funciona en servidor Y cliente)
#
# Valor por defecto: purvitaadmin
# Ejemplo: mi-panel-secreto, admin-access, etc.
# La ruta completa será: /{lang}/TU_VALOR_AQUI
#
# ⚠️ IMPORTANTE:
# - Solo usa letras minúsculas, números y guiones (a-z, 0-9, -)
# - NO incluyas barras (/) al inicio o final
# - Ejemplo correcto: "mi-panel-admin"
# - Ejemplo incorrecto: "/mi-panel-admin/" o "Mi Panel Admin"
#
NEXT_PUBLIC_ADMIN_BYPASS_URL=mi-panel-admin

# ==============================================================================
# ADVANCED FRAUD DETECTION (OPCIONAL)
# ==============================================================================

# IPHUB_API_KEY (OPCIONAL - Mejora detección de VPN/Tor)
# API key de IPHub para detectar VPNs, proxies y Tor
# Obtener en: https://iphub.info
# Sin esta key, la detección de VPN estará deshabilitada
# Precio: Gratis hasta 1,000 requests/día, luego $5/mes
IPHUB_API_KEY=

# FRAUD_ALERT_WEBHOOK_URL (OPCIONAL)
# URL de webhook para recibir alertas de fraude en sistemas externos
# Ejemplo: https://hooks.slack.com/services/your/webhook/url
# O tu propio endpoint para integración con monitoreo
FRAUD_ALERT_WEBHOOK_URL=

# FRAUD_ALERT_WEBHOOK_SECRET (OPCIONAL)
# Secret para firmar webhooks de fraude
# Generar con: openssl rand -hex 32
# Se envía en header X-Webhook-Secret
FRAUD_ALERT_WEBHOOK_SECRET=

# ==============================================================================
# SECURITY CONFIGURATION - MANAGED FROM ADMIN PANEL
# ==============================================================================
# ⚠️ IMPORTANTE: La mayoría de configuraciones de seguridad ahora se gestionan
# desde el Panel de Administración en /admin/security
#
# Configuraciones gestionadas desde el panel:
# - CAPTCHA (activar/desactivar, proveedor, claves, threshold)
# - IPs Bloqueadas (agregar, eliminar, temporal/permanente)
# - Palabras Bloqueadas (agregar, eliminar, categorías, severidad)
# - Cuentas Bloqueadas (bloquear usuarios, tipos de fraude)
# - Alertas de Fraude (revisar, limpiar, confirmar)
# - Threat Intelligence:
#   * Abuse.ch (URLhaus, ThreatFox, cache TTL, log threats)
#   * VirusTotal (cache TTL, threshold)
#   * Google Safe Browsing (cache TTL)
#   * Estrategia de detección (any, majority, all)
#
# Solo configura aquí las API keys que no se pueden gestionar desde el panel:
# ==============================================================================

# ENABLE_CSP_DEV (OPCIONAL - SOLO DESARROLLO)
# Habilita Content Security Policy en modo desarrollo
# Por defecto, CSP solo está activo en producción
# Útil para detectar problemas de CSP durante el desarrollo
# Valores: true | false (default: false)
ENABLE_CSP_DEV=false

# ==============================================================================
# THREAT INTELLIGENCE API KEYS (SOLO API KEYS)
# ==============================================================================
# ⚠️ NOTA: La habilitación, cache TTL, threshold y demás configuraciones se hacen
# desde el panel de administración en /admin/security > Threat Intelligence
# Aquí solo debes configurar las API keys necesarias


# VIRUSTOTAL_API_KEY (OPCIONAL)
# API key de VirusTotal para verificación avanzada de amenazas
# Obtener API key GRATUITA en: https://www.virustotal.com/gui/join-us
# Plan gratuito: 500 requests/día, 4 requests/minuto
# Cache TTL y threshold se configuran desde /admin/security
VIRUSTOTAL_API_KEY=

# GOOGLE_SAFE_BROWSING_API_KEY (OPCIONAL)
# API key de Google Safe Browsing para detección de malware y phishing
# Obtener API key GRATUITA en: https://console.cloud.google.com/
# 1. Crear proyecto en Google Cloud Console
# 2. Habilitar "Safe Browsing API"
# 3. Crear credenciales (API Key)
# Plan gratuito: 10,000 requests/día
# Cache TTL se configura desde /admin/security
GOOGLE_SAFE_BROWSING_API_KEY=

# ==============================================================================
# AUTO-BLOCK CONFIGURATION (BLOQUEO AUTOMÁTICO)
# ==============================================================================
# Configuración para el bloqueo automático de IPs maliciosas detectadas
# por los servicios de threat intelligence

# ⚠️ IMPORTANTE - POLÍTICA DE SEGURIDAD:
# En PRODUCCIÓN (NODE_ENV=production):
#   - Estas variables son IGNORADAS por seguridad
#   - Siempre se usan valores seguros por defecto:
#     * AUTO_BLOCK_ENABLED = true (siempre activo)
#     * AUTO_BLOCK_DURATION_HOURS = 24 (1 día)
#     * AUTO_BLOCK_MIN_CONFIDENCE = 70 (balance seguridad/falsos positivos)
#   - Para cambiar estos valores en producción, usa el Admin Panel
#
# En DESARROLLO (NODE_ENV=development):
#   - Estas variables SÍ se respetan (para testing)
#   - Puedes desactivar auto-block temporalmente para pruebas
#
# Configuración desde Admin Panel (recomendado):
# Admin → Security → Rate Limit → Auto-Block Configuration

# AUTO_BLOCK_ENABLED (SOLO DESARROLLO)
# En producción: SIEMPRE true (ignora esta variable)
# En desarrollo: Puedes configurar true/false para testing
# true = Las IPs detectadas se bloquean automáticamente en la tabla blocked_ips
# false = Solo se bloquea la solicitud actual, no se guarda en la base de datos
AUTO_BLOCK_ENABLED=true

# AUTO_BLOCK_DURATION_HOURS (SOLO DESARROLLO)
# En producción: SIEMPRE 24 horas (ignora esta variable)
# En desarrollo: Puedes configurar cualquier valor entre 1-8760 horas
# Duración en horas del bloqueo automático de IPs
AUTO_BLOCK_DURATION_HOURS=24

# AUTO_BLOCK_MIN_CONFIDENCE (SOLO DESARROLLO)
# En producción: SIEMPRE 70 (ignora esta variable)
# En desarrollo: Puedes configurar cualquier valor entre 0-100
# Nivel mínimo de confianza para activar el bloqueo automático
# Valores recomendados:
# - 70-80: Balance entre seguridad y falsos positivos
# - 80-90: Más estricto, menos falsos positivos
# - 60-70: Más permisivo, más protección
AUTO_BLOCK_MIN_CONFIDENCE=70

# ==============================================================================
# CAPTCHA API KEYS (SOLO API KEYS)
# ==============================================================================
# ⚠️ NOTA: La habilitación y configuración de CAPTCHA se hace desde
# el panel de administración en /admin/security > CAPTCHA
# Aquí solo debes configurar las claves del proveedor que elijas

# ==============================================================================
# MARKETING & ANALYTICS
# ==============================================================================
# ⚠️ IMPORTANTE: Todos los scripts de marketing (Facebook Pixel, TikTok Pixel,
# Google Tag Manager) se configuran desde el Admin Panel en:
# Admin → Advertising Scripts
#
# NO necesitas configurar variables de entorno para:
# - NEXT_PUBLIC_GTM_ID (Google Tag Manager)
# - NEXT_PUBLIC_FACEBOOK_PIXEL_ID (Facebook Pixel)
# - NEXT_PUBLIC_TIKTOK_PIXEL_ID (TikTok Pixel)
#
# El sistema carga dinámicamente los scripts desde la base de datos, lo que permite:
# - Cambios en tiempo real sin redeploy
# - Activar/desactivar scripts individualmente
# - Gestión visual desde el panel de administración
# - Protección automática en páginas de afiliados
# ==============================================================================

# Google Analytics 4 (OPCIONAL)
# Measurement ID de Google Analytics 4 para tracking de eventos y conversiones
# Obtener en: https://analytics.google.com/
# 1. Crear propiedad GA4
# 2. Copiar el Measurement ID (formato: G-XXXXXXXXXX)
# Nota: El tracking de eventos se hace automáticamente con pixel-events.ts
NEXT_PUBLIC_GA_MEASUREMENT_ID=

# ==============================================================================
# SEO - SEARCH CONSOLE VERIFICATION (OPCIONAL)
# ==============================================================================
# Meta tags de verificación para Search Consoles y herramientas de webmaster
# Estos códigos se agregan automáticamente al <head> de tu sitio
# Solo necesitas configurar los que vayas a usar
# ==============================================================================

# Google Search Console (OPCIONAL)
# Código de verificación de Google Search Console
# Obtener en: https://search.google.com/search-console
# 1. Agregar propiedad
# 2. Método de verificación: "Etiqueta HTML"
# 3. Copiar el código (formato: abc123xyz456...)
NEXT_PUBLIC_GOOGLE_SITE_VERIFICATION=

# Bing Webmaster Tools (OPCIONAL)
# Código de verificación de Bing Webmaster Tools
# Obtener en: https://www.bing.com/webmasters
# 1. Agregar sitio
# 2. Método de verificación: "Etiqueta meta"
# 3. Copiar el código
NEXT_PUBLIC_BING_SITE_VERIFICATION=

# Yandex Webmaster (OPCIONAL)
# Código de verificación de Yandex Webmaster
# Obtener en: https://webmaster.yandex.com/
# 1. Agregar sitio
# 2. Método de verificación: "Meta tag"
# 3. Copiar el código
NEXT_PUBLIC_YANDEX_VERIFICATION=

# Pinterest Domain Verification (OPCIONAL)
# Código de verificación de dominio de Pinterest
# Obtener en: https://www.pinterest.com/settings/claim
# 1. Reclamar sitio web
# 2. Método de verificación: "Agregar etiqueta HTML"
# 3. Copiar el código
NEXT_PUBLIC_PINTEREST_VERIFICATION=

# Facebook Domain Verification (OPCIONAL)
# Código de verificación de dominio de Facebook
# Obtener en: https://business.facebook.com/settings/owned-domains
# 1. Agregar dominio
# 2. Método de verificación: "Meta tag"
# 3. Copiar el código
NEXT_PUBLIC_FACEBOOK_DOMAIN_VERIFICATION=

# ==============================================================================
# CAPTCHA CONFIGURATION (CONFIGURACIÓN DE CAPTCHA)
# ==============================================================================
# Configuración de servicios CAPTCHA para protección contra bots
# Aquí solo debes configurar las claves del proveedor que elijas

# reCAPTCHA (Google)
# Obtener en: https://www.google.com/recaptcha/admin
RECAPTCHA_SITE_KEY=
RECAPTCHA_SECRET_KEY=

# hCaptcha
# Obtener en: https://www.hcaptcha.com/
HCAPTCHA_SITE_KEY=
HCAPTCHA_SECRET_KEY=

# Cloudflare Turnstile
# Obtener en: https://dash.cloudflare.com/
TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=